# Сессии

Сессия — это механизм для сохранения информации на разных веб-страницах для идентификации пользователей, пока они бродят по сайту или приложению. Обработка сессии это ключевой приём в PHP, что позволяет хранить данные пользователя на всех страницах веб-сайта или приложения. 

Мы будем использовать сессии, чтобы пользователь заходил в аккаунт только один раз, пока из него не выйдет. То есть, при закрытии страницы пользователь может открыть проект и попасть сразу на страницу со списком дел, если он авторизован.

Здесь нам понадобяться следующие методы и переменные:

- `session_start()` - запускает сессию (`необходимо это делать в самом верху проекта до тега <!DOCTYPE html>, чтобы не возникало ошибок`)
- `session_destroy()` - закрывает сессию (этот метод осуществяется при выходе из аккаунта)
- `$_SESSION` - переменная, которая является списком объектов типа `ключ-значение`. Здесь и будет храниться вся полезная инфомрация о пользователе.

Как работает переменная `$_SESSION`? В нее мы ложим все полезные данные о пользователе, которые мы будем использовать в дальнейшей работе в проекте. В данном случае, она нужна, чтобы положить в нее логин пользователя (это будет нужно, чтобы выводить все дела именно данного пользователя). Для этого используем следующую структуру: `$_SESSION['ключ'] = 'значение'`. У нас это будет выглядеть как `$_SESSION['login'] = $row['login']` (мы записали по ключу `login` логин авторизованного пользователя `$row['login']`). Это происходит на момент авторизации пользователя. То есть, если такой пользователь существует, создаем для него запись:

![image](https://user-images.githubusercontent.com/47351812/229352650-9fd0724e-7450-4760-a6d9-cfc4798298be.png)

Далее, чтобы переменная `$_SESSION` работала, необходимо запустить сессию с помощью `session_start()`. Это нужно делать в самом начале страницы. Отдновременно с сэтим проверим, был ли авторизован пользователь до этого, то есть пустая ли переменная `$_SESSION`. Если да, то пользователь еще не аторизован, а если не пустая, то необходимо сразу перенаправить его на страницу со списком дел:

![image](https://user-images.githubusercontent.com/47351812/229352811-89c7684d-047b-49f1-a327-da1c2df2bc0c.png)

Ту же самую проверку необходимо сделать на странице со списком дел. Но на этот раз перенаправляем пользователя, сли он еще не авторизован:

![image](https://user-images.githubusercontent.com/47351812/229352867-f432de04-61f1-4859-a3a7-17e84b58bb40.png)

Теперь, если у вас нет кнопки Выход, вы не покинете страницу со списком) Проверьте.

## Выход из аккаунта

Для осуществления выхода из аккаунта, выберем другой способ обработки нажатия на кнопку. Сделаем это через ссылку, а в `href` напишем путь до исполняемого файла. 

![image](https://user-images.githubusercontent.com/47351812/229352959-14b90b87-e876-481f-a250-b770f1fe7533.png)

В исполняемом файле нужно обнулить переменную `$_SESSION`, закрыть сессию и перенаправить пользователя на страницу со входом:

![image](https://user-images.githubusercontent.com/47351812/229352993-0be07ac0-9f08-4ba8-acfe-003d18ff41e2.png)

## Задание

Осуществить работу сессии в вашем проекте
