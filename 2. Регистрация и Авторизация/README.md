# Регистрация и Авторизация

Код `php` можно использовать в любом месте верстки при условии, что сама верстка лежит в файле с расширением `.php`

Чтобы вставить код `php` в верстку необходимо использовать специальный тег `<?php ... ?>`, где `...` сам код. Например:

    <?php
       echo "Hello, world";
    ?>
    
Теперь вернемся к Регистации и Авторизации

## Подключение к базе данных

Подключение к базе данных в `phpMyAdmin` можно осущствлять несколькими способами: встроенными методами или специальными классами. Мы будешь использовать специальный класс `PDO`, который упрощает взаимодействие с баззой данных.

Для подключения к базе данных, нужно создать экземпляр класса и заполнить в конструкторе класса необходимые поля, а именно:

1. `ServerName` - имя сервера (так как мы используем локальную сеть с помощью `xampp`, она будет иметь значение `localhost`);
2. `dbName` - имя базы данных (здесь вы вставляете имя базы данных, которую создавали в `phpMyAdmin`);
3. `UserName` - логин пользователя в вашей сети (по умолчанию в `xampp` используется имя пользователя `root`);
4. `Password` - пароль вашего пользователя в сети (по умолчанию оставляем пустым);

Теперь вставляем все данные в конструктор `PDO`:

![image](https://user-images.githubusercontent.com/47351812/229349097-952ffc37-bb88-458a-b282-4257c5795320.png)

`Важно! Для удобства перенесите подключение к базе данных в отдельный файл (например config.php) и, при взаимодействии с базой данных, просто подключайте данный файл через require "config.php"; Таким образом, подключение к базе данных у вас будет в одном месте и, при необходимости, вам нужно будет поменять код только в одном месте.`

## Регистрация

Дальше делаем регистрацию. Для этого необходимо выполнить следующие шаги:

1. Получить данные пользователя через тег `form` для выполнения регистрации;
2. Подключиться к базе данных;
3. Подготовить шаблон запроса к базе данных на выполнении регистрации;
4. Выполнить запрос, отправив в шаблон необходимые данные
5. Проверить таблицу в базе данных на заполнение данными пользователя.

### Получение данных у пользователя

Для получения данных пользователя в верстке необходимо использовать тег `form` и соответствующие поля `input`:

![image](https://user-images.githubusercontent.com/47351812/229350127-db7814e0-0725-462f-a45e-5b2dd7230db7.png)

Для получения данных с полей `input` нужно выполнить следующие условия:

1. В теге `form` обязателен атрибут `method`, в котором должно лежать значение `post`;
2. Кнопка Регистрации обязательно должна быть тегом `input` с атрибутом `type="submit" (иначе кнопка нажиматься не будет)`;
3. У каждого тега `input` должен быть атрибут `name`, которому вы будете обращаться в коде Регистрации;
4. Если вы хотите писать код не в данном файле, а в отдельном для убоства можно использовать в теге `form` атрибут `action="путь к испольняемому файлу.php"`;

В данном случае мы писали код в самом файле верстки, поэтому атрибут `action` не использовался.

Далее, чтобы обработать собитие нажатия на кнопку используем метод `post`, прописанный в теге `form` `(для тех, кто пишет код в отдельном файле эту проверку писать не надо)`:

![image](https://user-images.githubusercontent.com/47351812/229350149-d66e5352-3c60-4229-856e-05a79f956232.png)

- Метод `isset()` позволяет проверить, менялось ли значение у поля (в данном случае нажата ли кнопка)
- Переменная `$_POST` является списком обьектов типа `ключ-значение`, в котором находятся все `input` в данной форме
- `signIn` это `name` кнопки Регистрации

После того, как мы отловили нажатие на кнопку Регистрации, получаем данные с полей, введеные пользователем:

![image](https://user-images.githubusercontent.com/47351812/229350232-8ff61dec-a59b-495d-8b89-c82e0e9d1dc7.png)

Здесь все также используем переменную `$_POST` и `name` полей для получения данных 

### Подключение к базе данных

Подключение к базе данных мы осуществили в прошлый раз, поэтому просто используем подключение нашего файла `config.php`:

![image](https://user-images.githubusercontent.com/47351812/229350337-695b7976-5ce2-4122-ae60-cd1b7ee9c393.png)

### Подготовка шаблона запроса к базе данных на выполнении регистрации

В данном проете мы будем использовать четыре вида запроса в базу данных:

- `SELECT` - получить данные из таблицы
- `INSERT` - записать данные в таблицу
- `UPDATE` - изменить данные в таблице
- `DELETE` - удалить данные из таблицы

Для регистрации очевидно нужно использовать запрос на добавление данных `INSERT`.

Для получения шаблона данного запроса можно зайти в вашу таблицу в `phpMyAdmin` и выбрать раздел `SQL`

![image](https://user-images.githubusercontent.com/47351812/229350641-74690f45-2cc8-47e4-afbf-f4586458b378.png)

